@page "/staff/import"
@layout StaffLayout
@rendermode InteractiveServer
@inject NavigationManager Nav

<h3>Nhập kho (Staff)</h3>

<div class="card shadow mb-4">
    <div class="card-body">
        @if (!string.IsNullOrEmpty(errorMessage))
        {
            <div class="alert alert-danger">@errorMessage</div>
        }

        <div class="mb-3">
            <label class="form-label fw-bold">Mã hoặc tên sản phẩm:</label>
            <input class="form-control" @bind="maHoacTen" placeholder="Nhập mã hoặc tên..." />
        </div>

        <div class="mb-3">
            <label class="form-label fw-bold">Số lượng:</label>
            <input type="number" class="form-control" @bind="soLuong" min="1" />
        </div>

        <div class="mb-3">
            <label class="form-label fw-bold">Ghi chú:</label>
            <textarea class="form-control" rows="2" @bind="ghiChu"></textarea>
        </div>

        <div class="d-flex justify-content-end gap-2">
            <button class="btn btn-secondary" @onclick="HuyBo">Hủy</button>
            <button class="btn btn-primary" @onclick="XuLyNhap">Xác nhận nhập</button>
        </div>
    </div>
</div>

@code {
    private string? maHoacTen;
    private int soLuong = 1;
    private string? ghiChu;
    private string? errorMessage;

    private void XuLyNhap()
    {
        if (string.IsNullOrWhiteSpace(maHoacTen))
        {
            errorMessage = "Vui lòng nhập mã hoặc tên sản phẩm.";
            return;
        }

        if (soLuong <= 0)
        {
            errorMessage = "Số lượng phải lớn hơn 0.";
            return;
        }

        // TODO: gọi API hoặc lưu dữ liệu

        // Trả về trang inventory staff sau khi thêm
        Nav.NavigateTo("/staff/inventory");
    }

    private void HuyBo()
    {
        Nav.NavigateTo("/staff/inventory");
    }
}
