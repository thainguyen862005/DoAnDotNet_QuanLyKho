@using QuanLyKho.Services
@inject NavigationManager Navigation
@inject UserSession Session
@rendermode InteractiveServer

<header class="bg-white border-bottom px-4 py-2 d-flex justify-content-between align-items-center">

    <h5 class="mb-0">Há»‡ thá»‘ng quáº£n lÃ½ kho</h5>

    <div class="dropdown">
        <a class="d-flex align-items-center text-decoration-none dropdown-toggle" href="#" data-bs-toggle="dropdown">

            <div class="rounded-circle me-2 bg-secondary text-white d-flex justify-content-center align-items-center"
                 style="width: 36px; height: 36px; font-weight:bold;">
                @(Session.CurrentUser?.Username.Substring(0, 1).ToUpper() ?? "A")
            </div>

            <span class="fw-semibold text-dark">
                @(Session.CurrentUser?.Username ?? "KhÃ¡ch")
            </span>
        </a>

        <ul class="dropdown-menu dropdown-menu-end">
            <li>
                <span class="dropdown-item-text text-muted small">
                    Vai trÃ²: @(Session.CurrentUser?.Role == 1 ? "Admin" : "NhÃ¢n viÃªn")
                </span>
            </li>
            <li>
                <hr class="dropdown-divider">
            </li>
            <li>
                <button class="dropdown-item text-danger" @onclick="Logout">
                    ğŸšª ÄÄƒng xuáº¥t
                </button>
            </li>
        </ul>
    </div>

</header>

@code {
    void Logout()
    {
        // 1. XÃ³a session
        Session.ClearUser();
        // 2. Chuyá»ƒn vá» trang login vÃ  táº£i láº¡i trang (forceLoad: true)
        Navigation.NavigateTo("/login", true);
    }
}